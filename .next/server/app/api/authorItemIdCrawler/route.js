"use strict";(()=>{var e={};e.id=224,e.ids=[224],e.modules={98860:e=>{e.exports=require("jsdom")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},76224:e=>{e.exports=require("tty")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},91460:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>q,requestAsyncStorage:()=>m,routeModule:()=>h,serverHooks:()=>x,staticGenerationAsyncStorage:()=>w});var a={};t.r(a),t.d(a,{GET:()=>l});var o=t(49303),s=t(88716),i=t(60670),u=t(29712),n=t(98860),p=t(87070);async function l(e){let{searchParams:r}=new URL(e.url),t=r.get("authorName"),a=r.get("authorCode"),o=await d(t,a),s=(await Promise.all(Array.from({length:o}).map((e,r)=>c(t,a,r+1)))).flat().map(Number),i=p.NextResponse.json({itemIds:s});return i.headers.set("Access-Control-Allow-Origin","*"),i.headers.set("Access-Control-Allow-Methods","GET, POST, OPTIONS"),i.headers.set("Access-Control-Allow-Headers","X-Requested-With, Content-Type"),i}async function c(e,r,t){try{let a=[],o=`https://www.aladin.co.kr/m/msearch.aspx?AuthorSearch=${e}@${r}&BranchType=1&page=${t}`,s=await u.Z.get(o);return new n.JSDOM(s.data).window.document.querySelectorAll("div.browse_list_box[itemId]").forEach(e=>{let r=e.getAttribute("itemId");a.push(r)}),a}catch(e){console.error(`Error fetching page ${t}:`,e)}}async function d(e,r){let t=`https://www.aladin.co.kr/m/msearch.aspx?AuthorSearch=${e}@${r}&BranchType=1&page=1`,a=await u.Z.get(t),o=new n.JSDOM(a.data).window.document.querySelectorAll(".search_list_newnum ul li"),s=1,i=0;return o.forEach(e=>{let r=e.querySelector("a"),t=r.getAttribute("onclick");if(t){let e=t.match(/Page_Set\('(\d+)'\)/);if(e){let t=parseInt(e[1],10);t>i&&(i=t),r.classList.contains("search_numlist_next")&&(s=t)}}}),1===s&&(s=i),s}let h=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/authorItemIdCrawler/route",pathname:"/api/authorItemIdCrawler",filename:"route",bundlePath:"app/api/authorItemIdCrawler/route"},resolvedPagePath:"C:\\Users\\bora5\\Working\\booksight\\src\\app\\api\\authorItemIdCrawler\\route.js",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:w,serverHooks:x}=h,g="/api/authorItemIdCrawler/route";function q(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:w})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,972,712],()=>t(91460));module.exports=a})();