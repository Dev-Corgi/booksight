(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[776],{2613:function(e,t,r){"use strict";r.r(t);var l,n,a=r(4410);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)({}).hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(null,arguments)}t.default=function(e){return a.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 512 512"},e),l||(l=a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M243.5 25.5q140.024-1.39 212.5 117 60.636 117.595-4 233-68.994 106.043-196.5 110-132.313-4.743-200.5-117-60.688-117.597 4-233 64.964-100.13 184.5-110m1 33q121.226-.831 183.5 102 51.467 101.702-6 200-59.274 88.349-166.5 92-114.241-4.644-172.5-102-50.631-99.593 4-197 55.218-86.004 157.5-95",clipRule:"evenodd"})),n||(n=a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M249.5 148.5q33.664-.59 25.5 32-12.885 17.565-32.5 7.5-15.075-13.842-4.5-31.5 5.223-5.009 11.5-8M251.5 217.5q13.882-1.686 19.5 11 1 70 0 140-9.916 15.987-26.5 6.5a69 69 0 0 1-4.5-6.5 4898 4898 0 0 1 0-140q3.656-7.91 11.5-11",clipRule:"evenodd"})))}},124:function(e,t,r){"use strict";r.r(t);var l,n,a,i=r(4410);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)({}).hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(null,arguments)}t.default=function(e){return i.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 512 512"},e),l||(l=i.createElement("circle",{cx:68.267,cy:68.267,r:68.267,fill:"currentColor",transform:"matrix(1 0 0 -1 187.733 136.533)"})),n||(n=i.createElement("circle",{cx:68.267,cy:68.267,r:68.267,fill:"currentColor",transform:"matrix(1 0 0 -1 187.733 324.267)"})),a||(a=i.createElement("circle",{cx:68.267,cy:68.267,r:68.267,fill:"currentColor",transform:"matrix(1 0 0 -1 187.733 512)"})))}},9068:function(e,t,r){Promise.resolve().then(r.t.bind(r,8173,23)),Promise.resolve().then(r.bind(r,3599)),Promise.resolve().then(r.bind(r,928)),Promise.resolve().then(r.bind(r,4480)),Promise.resolve().then(r.bind(r,5848)),Promise.resolve().then(r.bind(r,4428)),Promise.resolve().then(r.bind(r,9433)),Promise.resolve().then(r.bind(r,2613)),Promise.resolve().then(r.bind(r,124)),Promise.resolve().then(r.bind(r,1568)),Promise.resolve().then(r.bind(r,9163)),Promise.resolve().then(r.bind(r,977)),Promise.resolve().then(r.bind(r,8649)),Promise.resolve().then(r.bind(r,6824))},977:function(e,t,r){"use strict";r.d(t,{default:function(){return n}});var l=r(7437);function n(e){let{book:t}=e;return(0,l.jsx)("div",{className:"flex items-center justify-center w-[165px] h-[58px] rounded-[18px] bg-white",onClick:()=>{window.open(t.link)},children:(0,l.jsx)("p",{className:"font-NotoSansKRSemiBold text-[19px] text-black",children:"구매하기"})})}},8649:function(e,t,r){"use strict";r.d(t,{default:function(){return K}});var l,n,a,i,s,o,c=r(7437),x=r(2265),A=r(4887);function d(e){let{title:t,height:r=34,font:l="NotoSansKRSemiBold"}=e;return(0,c.jsxs)("div",{className:"flex flex-col w-min h-min pb-[3px] pt-[24px] origin-top-left",style:{scale:r/34},children:[(0,c.jsx)("div",{className:"w-full h-[8px] bg-primary"}),(0,c.jsx)("p",{className:"font-".concat(l," whitespace-nowrap text-[22px] tracking-[-2px] pr-[7px] -mt-[30px]"),children:t})]})}var u=r(4410);function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)({}).hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(null,arguments)}var f=function(e){return u.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 512 512"},e),l||(l=u.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:90.353,d:"m0 0 512 512m0-512L0 512"})))};function m(e){let{requestClose:t}=e;return(0,c.jsx)("div",{className:"absolute right-0 mt-[33px] mr-[41px] w-[17px] h-[17px]",onClick:t,children:(0,c.jsx)(f,{})})}function h(){return(0,c.jsxs)("div",{className:"w-min h-min",children:[(0,c.jsxs)("div",{className:"flex flex-row gap-[37px] font-KopubWorldBold text-textColor-primary text-[23px] whitespace-nowrap",children:[(0,c.jsx)("p",{children:"주변 도서관"}),(0,c.jsx)("p",{children:"전체 도서관"}),(0,c.jsx)("p",{children:"택배 대출"})]}),(0,c.jsxs)("div",{className:"relative mt-[1px] w-[408px] h-[3px]",children:[(0,c.jsx)("div",{className:"absolute w-full h-full bg-black opacity-10"}),(0,c.jsx)("div",{className:"absolute w-[102px] h-full bg-primary"})]})]})}var g=r(5747);function w(){return(w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)({}).hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(null,arguments)}var v=function(e){return u.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 512 512"},e),n||(n=u.createElement("rect",{width:330.24,height:38.4,x:90.88,y:126.72,fill:"currentColor",rx:19.2})),a||(a=u.createElement("rect",{width:330.24,height:38.4,x:90.88,y:262.4,fill:"currentColor",rx:19.2})),i||(i=u.createElement("rect",{width:330.24,height:38.4,x:90.88,y:398.08,fill:"currentColor",rx:19.2})))};function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)({}).hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(null,arguments)}var j=function(e){return u.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 512 512"},e),s||(s=u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M235.5 47.5q131.807-6.73 201.5 104 54.999 103.988 0 208-6.145 11.577-15.5 20.5-21.134 6.688-25-15a62 62 0 0 1 2.5-8.5q51.156-76.102 21-163-46.526-107.455-164-114-115.114 5.768-163 110-33.442 90.956 21 171 1.48 23.019-21.5 20.5-5.104-2.1-8.5-6.5-61.857-95.723-20-202 51.801-109.048 171.5-125",clipRule:"evenodd"})),o||(o=u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M251.5 153.5q67.912 1.308 97.5 62 19.272 51.597-10 98-11.726 12.202-26 3-6.202-7.46-4-17 9.859-15.225 14-33 4.608-56.061-47.5-76.5-58.544-12.353-84.5 41.5-8.237 22.338-1 45a434 434 0 0 0 12 25q-.858 24.325-24.5 17.5-8.394-7.917-13.5-18.5-27.25-63.801 18-116 29.226-27.99 69.5-31M246.5 345.5q60.148-2.524 84.5 52a70.3 70.3 0 0 1 4 16 400 400 0 0 1 0 40q-6.71 13.473-21.5 9.5-6.75-2.75-9.5-9.5a545 545 0 0 0-2-37q-14.646-45.453-61.5-35.5-25.264 9.267-31.5 35.5a545 545 0 0 0-2 37q-7.878 14.298-23.5 8.5-5.308-2.86-7.5-8.5a400 400 0 0 1 0-40q12.498-57.75 70.5-68",clipRule:"evenodd"})))};async function y(e){let{latitude:t,longitude:r}=e;async function l(e,t){let r="".concat(t,",").concat(e),l=await fetch("/api/reverseGeoCode?coords=".concat(r));return await l.json()}let n=await l(t,r),a=n.results[0].region,i=a.area1.name+" ",s=a.area2.name+" ",o=a.area3.name+" ",c=a.area4.name+" ",x=n.results[0].land.name;return"".concat(i).concat(s).concat(o).concat(" "!=c?c:"").concat(x)}function N(e){let{isOpen:t,location:r}=e,[l,n]=(0,x.useState)(!0),[a,i]=(0,x.useState)("");return(0,x.useEffect)(()=>{t&&async function(){try{let e=y(r);i(e),n(!1)}catch(e){console.error("Error fetching data:",e)}}()},[r]),(0,c.jsx)(c.Fragment,{children:!l&&(0,c.jsxs)("div",{className:"flex flex-row gap-[8px]",children:[(0,c.jsx)("div",{className:"flex justify-center items-center py-[8px] px-[9.6px] border-[1.5px] border-textColor-primary rounded-full",children:(0,c.jsxs)("div",{className:"flex flex-row",children:[(0,c.jsx)("div",{className:"relative w-[20px] h-[20px]",children:(0,c.jsx)(g.default,{className:"text-textColor-primary"})}),(0,c.jsx)("p",{className:"font-NotoSansKRMedium text-textColor-primary text-[15px] ml-[1px]",children:a})]})}),(0,c.jsx)("div",{className:"flex justify-center items-center py-[8px] px-[9.6px] border-[1.5px] border-textColor-primary rounded-full",children:(0,c.jsxs)("div",{className:"flex flex-row",children:[(0,c.jsx)("div",{className:"relative w-[20px] h-[20px]",children:(0,c.jsx)(j,{className:"text-textColor-primary"})}),(0,c.jsx)("p",{className:"font-NotoSansKRMedium text-textColor-primary text-[15px] ml-[1px]",children:"2km"})]})}),(0,c.jsx)("div",{className:"flex justify-center items-center py-[8px] px-[9.6px] border-[1.5px] border-textColor-primary rounded-full",children:(0,c.jsxs)("div",{className:"flex flex-row",children:[(0,c.jsx)("div",{className:"relative w-[20px] h-[20px]",children:(0,c.jsx)(v,{className:"text-textColor-primary"})}),(0,c.jsx)("p",{className:"font-NotoSansKRMedium text-textColor-primary text-[15px] ml-[1px]",children:"10개"})]})})]})})}var E=r(6648),C=r(7494),B=r(6463);async function S(e){let{latitude:t=0,longitude:r=0}=e;async function l(e,t){let r=await fetch("/api/searchNearByLibrary?latitude=".concat(e,"&longitude=").concat(t),{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"https://localhost:3001"}});return await r.json()}return await l(t,r)}async function R(e,t){async function r(e,t){try{let r=await fetch("/api/isRentPossible?libCode=".concat(e,"&isbn13=").concat(t));if(!r.ok)throw Error("Failed to fetch isRentPossible");return await r.json()}catch(e){console.log(e)}}return await r(e,t)}var P=r(4201),Q=r(694);function k(e){let{isOpen:t,location:r,isbn13:l}=e,n=(0,B.useRouter)(),[a,i]=(0,x.useState)(!0),[s,o]=(0,x.useState)([]),[A,d]=(0,x.useState)();(0,x.useEffect)(()=>{t&&async function(){try{let e=await S({latitude:37.5666,longitude:126.9782});o(e)}catch(e){console.error("Error fetching data:",e)}}()},[t,r]),(0,x.useEffect)(()=>{async function e(){let e=s.map(async e=>({libraryInfo:await (0,Q.Z)(e.libCode),libraryPicture:await (0,P.Z)(e.libCode),rentPossible:await R(e.libCode,l)}));d((await Promise.all(e)).map(e=>{let{libraryInfo:t,libraryPicture:r,rentPossible:l}=e,n=t.libInfo;return n.picture=r,n.rentState="N"===l.response.result.hasBook?"미 소장":"Y"===l.response.result.loanAvailable?"대출 하기":"대출 불가",n}).sort((e,t)=>{let r={"대출 하기":1,"대출 불가":2,"미 소장":3};return r[e.rentState]-r[t.rentState]})),i(!1)}t&&e()},[s]);let u=e=>{n.push("/librarydetail/".concat(e))};return(0,c.jsx)(c.Fragment,{children:!a&&(0,c.jsx)("div",{className:"flex flex-row justify-end w-full pl-[50px]",children:(0,c.jsx)("div",{className:"flex flex-col flex-grow mt-[33.56px] rounded-l-[23.69px] overflow-clip whitespace-nowrap",children:A.map((e,t)=>(0,c.jsxs)("div",{className:"relative w-full h-[80px]",children:[(0,c.jsx)("div",{className:"absolute w-full h-[80px]",children:(0,c.jsx)(E.default,{src:e.picture,alt:"libraryThumbnail",className:"object-cover",fill:!0,sizes:1})}),(0,c.jsx)("div",{className:"absolute w-full h-full bg-black ".concat("대출 하기"===e.rentState?"bg-opacity-50":"bg-opacity-70"," border-t-[1px] border-b-[1px] border-white border-opacity-30")}),(0,c.jsxs)("div",{className:"absolute flex flex-row h-full  justify-between items-center  w-full",children:[(0,c.jsxs)("div",{className:"flex flex-row ml-[18.22px]",children:[(0,c.jsx)("p",{className:"font-MontserratSemiBold text-[14px] text-primary",children:"0"+(t+1)}),(0,c.jsx)("p",{className:"ml-[15.53px] w-[280px] font-NotoSansKRBold text-[24px] text-primary",onClick:()=>u(e.libCode),children:e.libName})]}),(0,c.jsxs)("div",{className:"flex flex-row justify-start gap-[60px]",children:[(0,c.jsxs)("div",{className:"flex flex-row w-[300px] items-center gap-[2.83px]",children:[(0,c.jsx)("div",{className:"relative w-[19px] h-[19px]",children:(0,c.jsx)(g.default,{className:"text-primary"})}),(0,c.jsx)("p",{className:"font-NotoSansKRBold text-primary text-[14px]",children:e.address})]}),(0,c.jsxs)("div",{className:"flex flex-row w-[130px] items-center gap-[2.83px]",children:[(0,c.jsx)("div",{className:"relative w-[19px] h-[19px]",children:(0,c.jsx)(C.default,{className:"text-primary"})}),(0,c.jsx)("p",{className:"font-NotoSansKRBold text-primary text-[14px]",children:e.tel})]})]}),(0,c.jsx)("div",{className:"flex justify-center items-center w-[121px] h-[38px] border-[2px] border-primary rounded-[10px] mr-[58px]",children:(0,c.jsx)("p",{className:"font-NotoSansKRSemiBold text-[14px] text-primary",children:e.rentState})})]}),"대출 하기"!==e.rentState&&(0,c.jsx)("div",{className:"absolute w-full h-full bg-black opacity-30"})]},t))})})})}function O(e){let{isOpen:t,requestClose:r,isbn13:l}=e,[n,a]=(0,x.useState)({latitude:37.5666,longitude:126.9782});if((0,x.useEffect)(()=>{t&&"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{a({latitude:e.coords.latitude,longitude:e.coords.longitude})},e=>{})},[]),t)return A.createPortal((0,c.jsx)("div",{className:"fixed flex flex-col justify-end inset-0 w-full h-screen bg-black bg-opacity-80",children:(0,c.jsxs)("div",{className:"relative flex flex-col items-center w-full h-[86%] bg-background rounded-t-[35px]",children:[(0,c.jsx)(m,{requestClose:r}),(0,c.jsx)("div",{className:"w-[166px] h-[59px] mt-[41.19px]",children:(0,c.jsx)(d,{height:59,title:"도서 대출",font:"KopubWorldBold"})}),(0,c.jsxs)("div",{className:"flex flex-row justify-between w-full h-[45px] pl-[50px] pr-[58px] -mt-[7.14]",children:[(0,c.jsx)(h,{}),(0,c.jsx)(N,{isOpen:t,location:n})]}),(0,c.jsx)(k,{isOpen:t,location:n,isbn13:l})]})}),document.getElementById("rentModal"))}function K(e){let{book:t}=e,[r,l]=(0,x.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"flex items-center justify-center w-[165px] h-[58px] rounded-[18px] bg-primary",onClick:()=>{l(!0)},children:(0,c.jsx)("p",{className:"font-NotoSansKRSemiBold text-[19px] text-white",children:"대여하기"})}),(0,c.jsx)(O,{isOpen:r,requestClose:()=>{l(!1)},isbn13:t.isbn13})]})}},4480:function(e,t,r){"use strict";r.r(t),t.default={src:"/_next/static/media/profile.8630784d.jpg",height:720,width:720,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABwEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAKGCv//EAB0QAQACAQUBAAAAAAAAAAAAAAECAwQABRIUITH/2gAIAQEAAT8AszsY3Hqja3FMWYRkwIzXir8HzX//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:8}},5848:function(e,t,r){"use strict";r.r(t),t.default={src:"/_next/static/media/reviewSection.e0390cf4.png",height:346,width:627,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAAc0lEQVR4nGNkYGC4BcQSHOxsf9hYWZhYWJgZ3n34zGhqqP03LiLADaTgKxBzATEKMDXUYagqzmgDKbgMxOJA/FtYkI9FQU6a68/fvxzmxvr3wgO9KkEKeEESb99/+pcSG8zmZGcpz8HBJiQqLHSLhY31AQBraxvGWCHOvwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4}},4428:function(e,t,r){"use strict";r.r(t),t.default={src:"/_next/static/media/shadow2.f9a44188.png",height:355,width:642,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAAYUlEQVR42mM4smsFIwMQHNm+tAqIjwPxbiDeB8T7gViP4ciOZUxQBQFAfO3w9qWXgPgsEN8H8utBEmATDm9dxApk5wDxXqhJ64DYlwEEju6AKIKapAXE9ke2L5FhYGBgAAASr0BldNPwAgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4}},9433:function(e,t,r){"use strict";r.r(t),t.default={src:"/_next/static/media/shelf.a7f9d790.png",height:122,width:1572,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAYAAADjAO9DAAAAJklEQVR4nGN8dOtc3+9fv5QYGRl//2dgYGQAAiDxHwhYmJiZXwEA+YYNHHCyBgIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:1}}},function(e){e.O(0,[534,824,14,971,23,744],function(){return e(e.s=9068)}),_N_E=e.O()}]);